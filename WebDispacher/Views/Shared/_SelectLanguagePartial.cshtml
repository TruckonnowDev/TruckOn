@using Microsoft.AspNetCore.Builder
@using Microsoft.AspNetCore.Localization
@using Microsoft.AspNetCore.Mvc.Localization
@using Microsoft.Extensions.Options
@using Microsoft.AspNetCore.Mvc.Rendering;

@inject IViewLocalizer Localizer
@inject IOptions<RequestLocalizationOptions> LocOptions

@{
    var requestCulture = Context.Features.Get<IRequestCultureFeature>();
    var cultureItems = LocOptions.Value.SupportedUICultures
        .Select(c => new SelectListItem { Value = c.Name, Text = c.NativeName })
        ;
}

<div class="login">
    <form asp-controller="RA" asp-action="SetLanguage"
          asp-route-returnUrl="@Context.Request.Path"
          method="post" class="form-horizontal" name="setLanguage">
        <input id="culture" type="hidden" name="culture">
        <a href="#" id="login"><img style="margin-bottom: 4px" src='/Icon/flags/@(requestCulture.RequestCulture.UICulture.Name).svg'/> @requestCulture.RequestCulture.UICulture.Name.ToUpper()</a>
        <ul class="sub-login sub-lang invert-menu">
            @foreach (var item in cultureItems)
            {
                @if (item.Value == requestCulture.RequestCulture.UICulture.Name)
                {
                    <li><a style="text-transform:capitalize;color: #007bff;cursor: pointer"><img style="margin-bottom: 4px" src='Icon/flags/@(item.Value).svg'/> @item.Text</a></li>
                }
                else
                {
                    <li><a style="text-transform:capitalize;cursor: pointer" onclick='ChangeLang("@item.Value")'><img style="margin-bottom: 4px" src='Icon/flags/@(item.Value).svg'/> @item.Text</a></li>
                }
            }
        </ul>
    </form>
</div>
    
<script>
    function ChangeLang(value){
        document.getElementById('culture').value = value;
        document.forms["setLanguage"].submit();
    }
</script>